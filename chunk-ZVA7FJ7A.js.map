{
  "version": 3,
  "sources": ["apps/findqo-ireland/src/app/feature/my-ads/my-ads.facade.ts"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { Params } from '@angular/router';\nimport { AdsApi } from '@core/data-access/apis/ads.api';\nimport { CommonFacade } from '@core/facades/common.facade';\nimport { GetAdListResponse, GetAdStatusListResponse } from '@core/models';\nimport { SnackService } from '@core/services/snack.service';\nimport { AdsState } from '@shared/states/ads.state';\nimport { Observable } from 'rxjs';\nimport { MY_ADS_HEADER_STATUS_MAPPING } from '@core/constants/my-ads.constant';\nimport { MyProfileFacade } from '@feature/my-profile/my-profile.facade';\nimport { AdStatus, MenuKeys, UpdateAction } from '@core/enums';\nimport { MyAdUnPublishDialogComponent } from './components/my-ad-unpublish-dialog/my-ad-unpublish-dialog.component';\n\n@Injectable()\nexport class MyAdsFacade {\n\tconstructor(\n\t\tprivate adsApi: AdsApi,\n\t\tprivate commonFacade: CommonFacade,\n\t\tprivate snackService: SnackService,\n\t\tprivate adState: AdsState,\n\t\tprivate readonly profileFacade: MyProfileFacade\n\t) {}\n\n\tgetAdsStatusList$(): Observable<GetAdStatusListResponse[]> {\n\t\treturn this.adState.adStatusList$;\n\t}\n\n\tloadAdStatusList(): void {\n\t\tthis.adsApi.getAdsStatusList().subscribe((adStatusList: GetAdStatusListResponse[]) => {\n\t\t\tthis.adState.setAdStatusList(adStatusList);\n\t\t});\n\t}\n\n\tloadAdList(params?: Params): void {\n\t\tthis.adsApi.getMyAds(params).subscribe((myAds: GetAdListResponse) => {\n\t\t\tconst LIVE_ADS = myAds.data.filter((ad) => ad.adStatus.status === AdStatus.LIVE);\n\n\t\t\tthis.profileFacade.updateProfileValues(MenuKeys.LIVE_ADS, UpdateAction.UPDATE, LIVE_ADS.length);\n\t\t\tthis.profileFacade.updateProfileValues(MenuKeys.ADDS_COUNT, UpdateAction.UPDATE, myAds.data.length);\n\n\t\t\tthis.adState.setAdList(myAds.data);\n\t\t\tthis.adState.setPageMetaData(myAds?.meta);\n\t\t});\n\t}\n\n\tdeleteAd<T>(adId: string, dialogRef: MatDialogRef<T>, myAdHeaderStatusId?: number): void {\n\t\tconst AD_STATUS = MY_ADS_HEADER_STATUS_MAPPING[myAdHeaderStatusId];\n\n\t\tthis.adsApi.deleteAd(adId).subscribe(() => {\n\t\t\tthis.snackService.open({ data: { message: this.commonFacade.getTranslations()['n590'] }, panelClass: ['snackbar-success'] });\n\t\t\tdialogRef.close(true);\n\t\t\tif (AD_STATUS) {\n\t\t\t\tthis.loadAdList({ status: AD_STATUS, perPage: 10 });\n\t\t\t} else {\n\t\t\t\tthis.loadAdList();\n\t\t\t}\n\t\t\tthis.loadAdStatusList();\n\t\t});\n\t}\n\tunpublishAd(adId: string, updatestatus: string, dialogRef: MatDialogRef<MyAdUnPublishDialogComponent>, myAdHeaderStatusId?: number): void {\n\t\tconst AD_STATUS = MY_ADS_HEADER_STATUS_MAPPING[myAdHeaderStatusId];\n\n\t\tthis.adsApi.unpublishAd(adId, updatestatus).subscribe(() => {\n\t\t\tthis.snackService.open({ data: {type : 'success', message: this.commonFacade.getTranslations()['n4102'] }, panelClass: ['snackbar-success'] });\t\t\tdialogRef.close('UPDATE_STATUS');\n\t\t\tif (AD_STATUS) {\n\t\t\t\tthis.loadAdList({ status: AD_STATUS, perPage: 10 });\n\t\t\t} else {\n\t\t\t\tthis.loadAdList();\n\t\t\t}\n\t\t\tthis.loadAdStatusList();\n\t\t});\n\t}\n\n\tpublishAd(adId: string, updatestatus: string, myAdHeaderStatusId?: number): void {\n\t\tconst AD_STATUS = MY_ADS_HEADER_STATUS_MAPPING[myAdHeaderStatusId];\n\n\t\tthis.adsApi.unpublishAd(adId, updatestatus).subscribe(() => {\n\t\t\tthis.snackService.open({ data: {type : 'success', message: this.commonFacade.getTranslations()['n4103'] }, panelClass: ['snackbar-success'] });\n\t\t\tif (AD_STATUS) {\n\t\t\t\tthis.loadAdList({ status: AD_STATUS, perPage: 10 });\n\t\t\t} else {\n\t\t\t\tthis.loadAdList();\n\t\t\t}\n\t\t\tthis.loadAdStatusList();\n\t\t});\n\t}\n\n\tupdateAdStatus(adId: string, updatestatus: string) {\n\t\treturn this.adsApi.updateAdStatus(adId, updatestatus);\n\t}\n\n\tsoldAd(adId: string, dialogRef: any, myAdHeaderStatusId?: number): void {\n\t\tconst AD_STATUS = MY_ADS_HEADER_STATUS_MAPPING[myAdHeaderStatusId];\n\n\t\tthis.adsApi.soldAd(adId).subscribe(() => {\n\t\t\tthis.snackService.open({ data: { message: this.commonFacade.getTranslations()['n3201'] }, panelClass: ['snackbar-success'] });\n\t\t\tdialogRef.close();\n\t\t\tif (AD_STATUS) {\n\t\t\t\tthis.loadAdList({ status: AD_STATUS, perPage: 10 });\n\t\t\t} else {\n\t\t\t\tthis.loadAdList();\n\t\t\t}\n\t\t\tthis.loadAdStatusList();\n\t\t});\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
