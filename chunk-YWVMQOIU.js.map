{
  "version": 3,
  "sources": ["apps/findqo-ireland/src/app/core/guards/auth.guard.ts"],
  "sourcesContent": ["import { isPlatformBrowser } from '@angular/common';\nimport { Inject, Injectable, PLATFORM_ID } from '@angular/core';\nimport { ActivatedRouteSnapshot, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\nimport { APP_ROUTE } from '@core/constants';\nimport { Observable } from 'rxjs';\nimport { AuthService } from '../data-access/services/auth.service';\nimport { RouteService } from '@core/services/route.service';\nimport { StorageType } from '@core/enums';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class AuthGuard {\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private readonly platformId: any,\n\t\tprivate readonly router: Router,\n\t\tprivate readonly auth: AuthService,\n\t\tprivate readonly routeService: RouteService\n\t) {}\n\n\tcanActivate(_route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\n\t\tconst IS_LOGGED_IN = this.auth.user()?.accessToken;\n\n\t\tif (IS_LOGGED_IN) {\n\t\t\treturn true;\n\t\t} else if (isPlatformBrowser(this.platformId)) {\n\t\t\tconst CURRENT_URL = state.url;\n\t\t\tsessionStorage.setItem(StorageType.AUTH_REDIRECT, CURRENT_URL);\n\n\t\t\tthis.auth.openAuthDialog({\n\t\t\t\tonLogin: () => {\n\t\t\t\t\tthis.router.navigate([CURRENT_URL]);\n\t\t\t\t},\n\t\t\t\t// Handle the scenario of the user goes to the page by using browser address bar.\n\t\t\t\t...((CURRENT_URL === this.routeService.getPreviousUrl() || !this.routeService?.getPreviousUrl()) && { navigateTo: APP_ROUTE.home }),\n\t\t\t});\n\n\t\t\treturn false;\n\t\t}\n\n\t\treturn false;\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;AAYM,IAAO,YAAP,MAAO,WAAS;EACrB,YACuC,YACrB,QACA,MACA,cAA0B;AAHL,SAAA,aAAA;AACrB,SAAA,SAAA;AACA,SAAA,OAAA;AACA,SAAA,eAAA;EACf;EAEH,YAAY,QAAgC,OAA0B;AACrE,UAAM,eAAe,KAAK,KAAK,KAAI,GAAI;AAEvC,QAAI,cAAc;AACjB,aAAO;IACR,WAAW,kBAAkB,KAAK,UAAU,GAAG;AAC9C,YAAM,cAAc,MAAM;AAC1B,qBAAe,QAAQ,YAAY,eAAe,WAAW;AAE7D,WAAK,KAAK,eAAe;QACxB,SAAS,MAAK;AACb,eAAK,OAAO,SAAS,CAAC,WAAW,CAAC;QACnC;UAEK,gBAAgB,KAAK,aAAa,eAAc,KAAM,CAAC,KAAK,cAAc,eAAc,MAAO,EAAE,YAAY,UAAU,KAAI,EAChI;AAED,aAAO;IACR;AAEA,WAAO;EACR;;;uCA7BY,YAAS,mBAEZ,WAAW,GAAA,mBAAA,MAAA,GAAA,mBAAA,WAAA,GAAA,mBAAA,YAAA,CAAA;IAAA;EAAA;;4EAFR,YAAS,SAAT,WAAS,WAAA,YAFT,OAAM,CAAA;EAAA;;;sEAEN,WAAS,CAAA;UAHrB;WAAW;MACX,YAAY;KACZ;;UAGE;WAAO,WAAW;;;",
  "names": []
}
