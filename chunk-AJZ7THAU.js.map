{
  "version": 3,
  "sources": ["apps/findqo-ireland/src/app/feature/ad-detail/ad-detail.facade.ts"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\nimport { AdsApi } from '@core/data-access/apis/ads.api';\nimport { Ad } from '@core/models';\nimport { BehaviorSubject, Observable, map } from 'rxjs';\n\n@Injectable()\nexport class AdDetailFacade {\n\tconstructor(private readonly adsApi: AdsApi) {}\n\n\tprivate readonly _relatedAdList$ = new BehaviorSubject<Ad[]>([]);\n\n\tgetRelatedAdList$(): Observable<Ad[]> {\n\t\treturn this._relatedAdList$.asObservable();\n\t}\n\n\tloadRelatedAdList(currentAd: Ad): void {\n\t\tthis.adsApi\n\t\t\t.getLatestAdList({ section: currentAd.section.reference, aisle: currentAd.aisle.reference, perPage: 6 })\n\t\t\t.pipe(\n\t\t\t\tmap((adList: Ad[]) => {\n\t\t\t\t\t// Filter out the current Ad in the list\n\t\t\t\t\tconst FILTERED_AD_LIST = adList.filter((ad: Ad) => ad.id !== currentAd.id);\n\n\t\t\t\t\t// If the current Ad is not on the list remove one Ad on the list.\n\t\t\t\t\t// The maximum Ad in the Related Ad list is 5\n\t\t\t\t\tif (FILTERED_AD_LIST.length > 5) {\n\t\t\t\t\t\tFILTERED_AD_LIST.splice(FILTERED_AD_LIST.length - 1, 1);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn FILTERED_AD_LIST;\n\t\t\t\t})\n\t\t\t)\n\t\t\t.subscribe((adList: Ad[]) => this._relatedAdList$.next(adList));\n\t}\n\n\ttrackPhoneCall(id: string): void {\n\t\tthis.adsApi.trackPhoneCall(id).subscribe();\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;;AAMM,IAAO,iBAAP,MAAO,gBAAc;EAC1B,YAA6B,QAAc;AAAd,SAAA,SAAA;AAEZ,SAAA,kBAAkB,IAAI,gBAAsB,CAAA,CAAE;EAFjB;EAI9C,oBAAiB;AAChB,WAAO,KAAK,gBAAgB,aAAY;EACzC;EAEA,kBAAkB,WAAa;AAC9B,SAAK,OACH,gBAAgB,EAAE,SAAS,UAAU,QAAQ,WAAW,OAAO,UAAU,MAAM,WAAW,SAAS,EAAC,CAAE,EACtG,KACA,IAAI,CAAC,WAAgB;AAEpB,YAAM,mBAAmB,OAAO,OAAO,CAAC,OAAW,GAAG,OAAO,UAAU,EAAE;AAIzE,UAAI,iBAAiB,SAAS,GAAG;AAChC,yBAAiB,OAAO,iBAAiB,SAAS,GAAG,CAAC;MACvD;AAEA,aAAO;IACR,CAAC,CAAC,EAEF,UAAU,CAAC,WAAiB,KAAK,gBAAgB,KAAK,MAAM,CAAC;EAChE;EAEA,eAAe,IAAU;AACxB,SAAK,OAAO,eAAe,EAAE,EAAE,UAAS;EACzC;;;uCA/BY,iBAAc,mBAAA,MAAA,CAAA;IAAA;EAAA;;4EAAd,iBAAc,SAAd,gBAAc,UAAA,CAAA;EAAA;;;sEAAd,gBAAc,CAAA;UAD1B;;;",
  "names": []
}
